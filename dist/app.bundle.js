(()=>{let e=null,t=null;const n=document.getElementById("webcam"),o=document.getElementById("liveView"),i=document.getElementById("demos"),d=document.getElementById("webcamButton");navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?d.addEventListener("click",(function(t){if(!l)return;t.target.classList.add("removed");const o={audio:!1,video:{width:{ideal:window.innerWidth,max:1920},height:{max:1080},facingMode:"environment"}};navigator.mediaDevices.getUserMedia(o).then((function(t){const o=t.getVideoTracks();o.length&&(e=o[0]),n.srcObject=t,n.addEventListener("loadeddata",a)}))})):console.warn("getUserMedia() is not supported by your browser");const c=[];function s(){for(let e=0;e<c.length;e++)o.removeChild(c[e]);c.splice(0)}function a(){l.detect(n).then((function(e){s();for(let t=0;t<e.length;t++)if(e[t].score>.66){const n=document.createElement("p");n.innerText=e[t].class+" - with "+Math.round(100*parseFloat(e[t].score))+"% confidence.",n.style="margin-left: "+e[t].bbox[0]+"px; margin-top: "+(e[t].bbox[1]-10)+"px; width: "+(e[t].bbox[2]-10)+"px; top: 0; left: 0;";const i=document.createElement("div");i.setAttribute("class","highlighter"),i.style="left: "+e[t].bbox[0]+"px; top: "+e[t].bbox[1]+"px; width: "+e[t].bbox[2]+"px; height: "+e[t].bbox[3]+"px;",o.appendChild(i),o.appendChild(n),c.push(i),c.push(n)}t=window.requestAnimationFrame(a)}))}var l=void 0;cocoSsd.load().then((function(e){l=e,i.classList.remove("invisible")})),document.getElementById("stopButton").addEventListener("click",(function(){e&&e.stop(),s(),n.removeEventListener("loadeddata",a),window.cancelAnimationFrame(t),n.srcObject=null,e=null,t=null,d.classList.remove("removed")}));const r=function(e,t,n){let o;return function(){const t=this,i=arguments,d=function(){o=null,e.apply(t,i)},c=n;clearTimeout(o),o=setTimeout(d,500),c&&e.apply(t,i)}}((function(){console.log("resize"),e&&e.applyConstraints({width:window.innerWidth})}));window.addEventListener("resize",r)})();